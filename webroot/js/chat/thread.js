define(["require","jquery","react","chat/messages","chat/heading","chat/compose","websockets/mixin"],function(e){var t=e("jquery"),n=e("react"),r=e("chat/messages"),i=e("chat/heading"),s=e("chat/compose"),o=e("websockets/mixin"),u=n.createClass({displayName:"Thread",mixins:[o],fetchUrl:"/api/threads/view",sendUrl:"/api/messages/add",recieveUri:"messages.add",fetched:function(n){var r=[];n.thread.users.forEach(function(e){r.push(e.username)}),this.setState({id:n.thread.id,title:n.thread.title,users:r,messages:n.messages.reverse()}),t("#loading-messages").hide()},recieved:function(t){if(t.thread_id!=this.state.id)return;this.state.messages.push(t),this.setState({messages:this.state.messages})},render:function(){return this.state===null?!1:n.createElement("div",null,n.createElement(i,{title:this.state.title,users:this.state.users}),n.createElement("hr",null),n.createElement(r,{messages:this.state.messages}),n.createElement(s,{submit:this.send,thread_id:this.state.id}))}});return u});